import{$ as T,d as ee,l as r,o as we,m as Te,r as i,b as z,c as xe,e as f,a as t,w as a,f as u,g as E,z as L,n as g,B as b,a1 as J,s as X,q as m,a7 as Z,E as C,k as D,a2 as w,a3 as q,a4 as A,a5 as Ne}from"./index-DpLe_dtH.js";const Ve=d=>T.get("/koi/sysDictType/listPage",d),Ce=d=>T.get("/koi/sysDictType/getById/"+d),De=d=>T.post("/koi/sysDictType/update",d),Ie=d=>T.post("/koi/sysDictType/add",d),Ue=d=>T.post("/koi/sysDictType/deleteById/"+d),Be=d=>T.post("/koi/sysDictType/batchDelete",d),Ke=(d,M)=>T.post("/koi/sysDictType/updateStatus/"+d+"/"+M),ze={class:"koi-flex"},Me=ee({name:"dictTypePage"}),$e=ee({...Me,setup(d){const M=r(!1),R=r(!0),Y=r([{dictId:1,dictName:"系统开关🌻",dictType:"sys_common_status",dictStatus:"0",remark:"系统开关列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"},{dictId:2,dictName:"用户性别🌻",dictType:"sys_user_sex",dictStatus:"0",remark:"用户性别列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"},{dictId:3,dictName:"菜单状态🌻",dictType:"sys-menu-status",dictStatus:"1",remark:"菜单状态列表",createTime:"2023-08-08 23:00:00",updateTime:"2023-08-08 23:00:00",updateBy:"YU-ADMIN🌻"}]),s=r({pageNo:1,pageSize:10,dictName:"",dictStatus:"",dictType:""}),I=r(0),te=()=>{s.value={pageNo:1,pageSize:10,dictName:"",dictStatus:"",dictType:""}},ae=()=>{s.value.pageNo=1,c()},le=()=>{te(),c()},c=async()=>{I.value=400},N=async()=>{try{const n=await Ve(s.value);Y.value=n.data.records,I.value=n.data.total}catch{w("数据查询失败，请刷新重试🌻")}};we(()=>{c()});const U=r([]),O=r(!0),Q=r(!0),ne=n=>{U.value=n.map(e=>e.dictId),O.value=n.length!=1,Q.value=!n.length},oe=()=>{V(),$.value="字典添加",o.value.dictStatus="0",x.value.koiOpen(),Z("添加🌻")},ie=async n=>{if(n==null||n==""){A("请选择需要修改的数据🌻");return}try{const e=await Ce(n);o.value=e.data}catch{w("数据获取失败，请刷新重试🌻")}},j=async n=>{V(),$.value="字典修改";const e=n?n.dictId:U.value[0];(e==null||e=="")&&C("请选中需要修改的数据🌻"),ie(e),x.value.koiOpen(),Z("修改🌻")},x=r(),$=r("字典类型管理"),P=r();let o=r({dictId:null,dictType:null,dictName:null,dictStatus:null,remark:null});const V=()=>{o.value={dictId:null,dictType:null,dictName:null,dictStatus:null,remark:null}},de=Te({dictName:[{required:!0,message:"请输入字典名字",trigger:"blur"}],dictType:[{required:!0,message:"请输入字典类型",trigger:"blur"}],dictStatus:[{required:!0,message:"请输入选择字典状态",trigger:"blur"}]}),k=r(!1),se=()=>{P.value&&(k.value=!0,P.value.validate(async n=>{if(n)if(o.value.dictId!=null&&o.value.dictId!="")try{await De(o.value),D("修改成功🌻"),k.value=!1,x.value.koiQuickClose(),V(),c()}catch{k.value=!1,w("修改失败，请刷新重试🌻")}else try{await Ie(o.value),D("添加成功🌻"),k.value=!1,x.value.koiQuickClose(),V(),c()}catch{k.value=!1,w("添加失败，请刷新重试🌻")}else C("验证失败，请检查填写内容🌻"),k.value=!1}))},re=()=>{x.value.koiClose()},ue=n=>{let e=n.dictStatus==="0"?"启用":"停用";q("确认要["+e+"]-["+n.dictName+"]吗？").then(async()=>{if(V(),!n.dictId||!n.dictStatus){A("请选择需要修改的数据🌻");return}try{await Ke(n.dictId,n.dictStatus),D("修改成功🌻")}catch{N(),w("修改失败，请刷新重试🌻")}}).catch(()=>{C("已取消🌻")})},ce=n=>{const e=n.dictId;if(e==null||e==""){A("请选中需要删除的数据🌻");return}q("您确认需要删除字典名称["+n.dictName+"]么？").then(async()=>{try{await Ue(e),N(),D("删除成功🌻")}catch{N(),w("删除失败，请刷新重试🌻")}}).catch(()=>{C("已取消🌻")})},pe=()=>{if(U.value.length==0){Ne("请选择需要删除的数据🌻");return}q("您确认需要进行批量删除么？").then(async()=>{try{await Be(U.value),N(),D("批量删除成功🌻")}catch{w("批量删除失败，请刷新重试🌻"),N()}}).catch(()=>{C("已取消🌻")})};return(n,e)=>{const h=i("el-input"),_=i("el-form-item"),B=i("el-option"),F=i("el-select"),y=i("el-button"),W=i("el-form"),v=i("el-col"),me=i("KoiToolbar"),G=i("el-row"),p=i("el-table-column"),ye=i("RouterLink"),ve=i("el-switch"),H=i("el-tooltip"),fe=i("el-table"),_e=i("el-pagination"),ge=i("KoiDrawer"),be=i("KoiCard"),ke=z("debounce"),he=z("throttle"),S=z("auth"),Se=z("loading");return f(),xe("div",ze,[t(be,null,{default:a(()=>[u(t(W,{inline:!0},{default:a(()=>[t(_,{label:"字典名称",prop:"dictName"},{default:a(()=>[t(h,{placeholder:"请输入字典名称",modelValue:s.value.dictName,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.dictName=l),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(_,{label:"字典编号",prop:"dictType"},{default:a(()=>[t(h,{placeholder:"请输入字典编号",modelValue:s.value.dictType,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.dictType=l),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(_,{label:"字典状态",prop:"dictStatus"},{default:a(()=>[t(F,{placeholder:"请选择字典状态",modelValue:s.value.dictStatus,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.dictStatus=l),clearable:"",style:{width:"240px"},onKeyup:L(c,["enter","native"])},{default:a(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:a(()=>[u((f(),g(y,{type:"primary",icon:"search",plain:""},{default:a(()=>e[13]||(e[13]=[b("搜索")])),_:1,__:[13]})),[[ke,ae]]),u((f(),g(y,{type:"danger",icon:"refresh",plain:""},{default:a(()=>e[14]||(e[14]=[b("重置")])),_:1,__:[14]})),[[he,le]])]),_:1})]),_:1},512),[[J,R.value]]),t(G,{gutter:10},{default:a(()=>[u((f(),g(v,{span:1.5},{default:a(()=>[t(y,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=l=>oe())},{default:a(()=>e[15]||(e[15]=[b("新增")])),_:1,__:[15]})]),_:1})),[[S,["system:role:add"]]]),u((f(),g(v,{span:1.5},{default:a(()=>[t(y,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=l=>j()),disabled:O.value},{default:a(()=>e[16]||(e[16]=[b("修改")])),_:1,__:[16]},8,["disabled"])]),_:1})),[[S,["system:role:update"]]]),u((f(),g(v,{span:1.5},{default:a(()=>[t(y,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=l=>pe()),disabled:Q.value},{default:a(()=>e[17]||(e[17]=[b("删除")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[S,["system:role:delete"]]]),u((f(),g(v,{span:1.5},{default:a(()=>[t(y,{type:"warning",icon:"download",plain:""},{default:a(()=>e[18]||(e[18]=[b("导出")])),_:1,__:[18]})]),_:1})),[[S,["system:role:export"]]]),u((f(),g(v,{span:1.5},{default:a(()=>[t(y,{type:"danger",icon:"Refresh",plain:""},{default:a(()=>e[19]||(e[19]=[b("刷新缓存")])),_:1,__:[19]})]),_:1})),[[S,["system:role:update"]]]),t(me,{showSearch:R.value,"onUpdate:showSearch":e[6]||(e[6]=l=>R.value=l),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=E("br",null,null,-1)),u((f(),g(fe,{border:"",data:Y.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:ne},{default:a(()=>[t(p,{type:"selection",width:"55",align:"center"}),t(p,{label:"序号",prop:"dictId",width:"120px",align:"center",type:"index"}),t(p,{label:"字典名称",prop:"dictName",width:"120px",align:"center"}),t(p,{label:"字典类型",prop:"dictType",width:"180px",align:"center"},{default:a(l=>[t(ye,{to:`/system/dict/data/${l.row.dictType}`},{default:a(()=>[E("span",null,X(l.row.dictType),1)]),_:2},1032,["to"])]),_:1}),t(p,{label:"字典状态",prop:"dictStatus",width:"100px",align:"center"},{default:a(l=>[t(ve,{modelValue:l.row.dictStatus,"onUpdate:modelValue":K=>l.row.dictStatus=K,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:K=>ue(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(p,{label:"字典备注",prop:"remark",width:"260px","show-overflow-tooltip":!0,align:"center"}),t(p,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),t(p,{label:"修改时间",prop:"updateTime",width:"180px",align:"center"}),t(p,{label:"修改人",prop:"updateBy",width:"180px",align:"center"}),t(p,{label:"操作",align:"center",width:"120",fixed:"right"},{default:a(({row:l})=>[t(H,{content:"修改🌻",placement:"top"},{default:a(()=>[u(t(y,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:K=>j(l)},null,8,["onClick"]),[[S,["system:role:update"]]])]),_:2},1024),t(H,{content:"删除🌻",placement:"top"},{default:a(()=>[u(t(y,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:K=>ce(l)},null,8,["onClick"]),[[S,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Se,M.value]]),e[21]||(e[21]=E("br",null,null,-1)),u(t(_e,{background:"","current-page":s.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=l=>s.value.pageNo=l),"page-size":s.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=l=>s.value.pageSize=l),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:I.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[J,I.value>0]]),t(ge,{ref_key:"koiDrawerRef",ref:x,title:$.value,onKoiConfirm:se,onKoiCancel:re,loading:k.value},{content:a(()=>[t(W,{ref_key:"formRef",ref:P,rules:de,model:m(o),"label-width":"80px","status-icon":""},{default:a(()=>[t(G,null,{default:a(()=>[t(v,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(_,{label:"字典名称",prop:"dictName"},{default:a(()=>[t(h,{modelValue:m(o).dictName,"onUpdate:modelValue":e[9]||(e[9]=l=>m(o).dictName=l),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(_,{label:"字典类型",prop:"dictType"},{default:a(()=>[t(h,{modelValue:m(o).dictType,"onUpdate:modelValue":e[10]||(e[10]=l=>m(o).dictType=l),placeholder:"请输入字典类型",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(_,{label:"字典状态",prop:"dictStatus"},{default:a(()=>[t(F,{modelValue:m(o).dictStatus,"onUpdate:modelValue":e[11]||(e[11]=l=>m(o).dictStatus=l),placeholder:"请选择字典状态",clearable:""},{default:a(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(v,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(_,{label:"字典备注",prop:"remark"},{default:a(()=>[t(h,{modelValue:m(o).remark,"onUpdate:modelValue":e[12]||(e[12]=l=>m(o).remark=l),rows:5,type:"textarea",placeholder:"请输入字典备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),b(" "+X(m(o)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{$e as default};
