import{$ as x,d as ie,l as s,o as Ye,E as k,m as $e,r,b as K,c as ne,e as c,a,w as t,f as p,g as U,z as O,n as b,B as h,a1 as se,q as d,W as Ae,X as Oe,s as Ge,a7 as ue,k as V,a2 as T,a3 as G,a4 as J,a5 as Je,al as Fe,_ as Qe}from"./index-DpLe_dtH.js";import{e as je,f as He}from"./index-D8VyoKhn.js";const We=i=>x.get("/koi/sysLoginUser/listPage",i),Xe=i=>x.get("/koi/sysLoginUser/getById/"+i),Ze=i=>x.post("/koi/sysLoginUser/update",i),ea=i=>x.post("/koi/sysLoginUser/add",i),aa=i=>x.post("/koi/sysLoginUser/deleteById/"+i),ta=i=>x.post("/koi/sysLoginUser/batchDelete",i),la=(i,M)=>x.post("/koi/sysLoginUser/updateStatus/"+i+"/"+M),oa={class:"koi-flex"},ra={class:"flex justify-center"},na={class:"flex flex-justify-center"},sa=ie({name:"userPage"}),ua=ie({...sa,setup(i){const M=s(!1),P=s(!0),F=s([{userId:1,loginName:"YU-ADMIN",userName:"超级管理员",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic4.zhimg.com/v2-702a23ebb518199355099df77a3cfe07_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-06 04:00:00"},{userId:2,loginName:"KOI",userName:"小锦鲤",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic2.zhimg.com/v2-44ce1b82f7e68de4078bf513221619e1_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-07 04:00:00"},{userId:3,loginName:"YXT",userName:"于金金",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://pic1.zhimg.com/v2-3cbc889feac057cc7fb85a40c82598dc_b.webp",userStatus:"0",remark:"管理员",createTime:"2023-08-08 04:00:00"},{userId:4,loginName:"orange",userName:"迪迦",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic3.zhimg.com/v2-b6c350529f3c06c8a90d886c311f3866_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-06 04:00:00"},{userId:5,loginName:"apple",userName:"盖亚",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic2.zhimg.com/v2-430e1a7dd0508a0b4b01dca9b94b22f5_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-07 04:00:00"},{userId:6,loginName:"banana",userName:"阿古茹",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://pic3.zhimg.com/v2-6e8ff25c222b6302cb836c9f6b013e7e_b.webp",userStatus:"0",remark:"远古时代战士",createTime:"2023-08-08 04:00:00"},{userId:7,loginName:"pear",userName:"帝骑",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://pic2.zhimg.com/v2-d75d120cdab34142933ad9df18508ad1_b.webp",userStatus:"0",remark:"假面骑士",createTime:"2023-08-06 04:00:00"},{userId:8,loginName:"pineapple",userName:"创骑",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://pic3.zhimg.com/v2-a42559223697c17188a75ad3a10e1cea_b.webp",userStatus:"0",remark:"假面骑士",createTime:"2023-08-07 04:00:00"},{userId:9,loginName:"mango",userName:"时王",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img0.baidu.com/it/u=1752705848,3929873216&fm=253&app=138&size=w931&n=0&f=JPEG",userStatus:"0",remark:"假面骑士",createTime:"2023-08-08 04:00:00"},{userId:10,loginName:"plum",userName:"海绵宝宝",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://img1.baidu.com/it/u=3941674148,2170642163&fm=253&fmt=auto&app=138&f=JPEG?w=255&h=255",userStatus:"0",remark:"地底世界",createTime:"2023-08-06 04:00:00"},{userId:11,loginName:"watermelon",userName:"派大星",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://img2.baidu.com/it/u=1519337523,3739613381&fm=253&fmt=auto&app=120&f=JPEG?w=600&h=600",userStatus:"0",remark:"地底世界",createTime:"2023-08-07 04:00:00"},{userId:12,loginName:"peach",userName:"章鱼哥",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img2.baidu.com/it/u=71901679,703168528&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",userStatus:"0",remark:"地底世界",createTime:"2023-08-08 04:00:00"},{userId:13,loginName:"grape",userName:"光头强",userType:"1",email:"YU-ADMIN666@163.com",phone:"18888888888",sex:"1",avatar:"https://img0.baidu.com/it/u=1121602739,1172990093&fm=253&fmt=auto&app=138&f=JPEG?w=380&h=378",userStatus:"0",remark:"熊出没",createTime:"2023-08-06 04:00:00"},{userId:14,loginName:"Blackberry",userName:"熊大",userType:"1",email:"koi@qq.com",phone:"18666666666",sex:"1",avatar:"https://img1.baidu.com/it/u=1544796506,2220725573&fm=253&fmt=auto&app=120&f=JPEG?w=501&h=500",userStatus:"0",remark:"熊出没",createTime:"2023-08-07 04:00:00"},{userId:15,loginName:"Blueberry",userName:"熊二",userType:"2",email:"koi@qq.com",phone:"18666666666",sex:"2",avatar:"https://img1.baidu.com/it/u=550431475,3093096287&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=514",userStatus:"0",remark:"熊出没",createTime:"2023-08-08 04:00:00"}]),u=s({pageNo:1,pageSize:10,loginName:"",userName:"",phone:""}),D=s(0),pe=()=>{u.value={pageNo:1,pageSize:10,loginName:"",userName:"",phone:""},q.value=[]},de=()=>{u.value.pageNo=1,v()},me=()=>{pe(),v()},q=s(),v=async()=>{D.value=15},C=async()=>{try{const o=await We(Fe(u.value,q.value));F.value=o.data.records,D.value=o.data.total}catch{T("数据查询失败，请刷新重试🌻")}};Ye(()=>{v(),ce(),ge()});const B=s(),ce=async()=>{try{B.value=[{dictLabel:"系统用户",dictValue:"1",dictTag:"primary",dictColor:""},{dictLabel:"注册用户",dictValue:"2",dictTag:"warning",dictColor:""}]}catch{k("数据字典查询失败，请刷新重试🌻")}},Q=s(),ge=async()=>{try{Q.value=[{dictLabel:"男",dictValue:"1",dictTag:"primary",dictColor:""},{dictLabel:"女",dictValue:"2",dictTag:"danger",dictColor:""},{dictLabel:"未知",dictValue:"3",dictTag:"info",dictColor:""}]}catch{k("数据字典查询失败，请刷新重试🌻")}},z=s([]),E=s(!0),j=s(!0),ve=o=>{z.value=o.map(e=>e.userId),E.value=o.length!=1,j.value=!o.length},fe=()=>{I(),R.value="用户添加",n.value.userStatus="0",S.value.koiOpen(),ue("添加🌻")},be=async o=>{if(o==null||o==""){J("请选择需要修改的数据🌻");return}try{const e=await Xe(o);n.value=e.data}catch{T("数据获取失败，请刷新重试🌻")}},H=async o=>{I(),R.value="用户修改";const e=o?o.userId:z.value[0];(e==null||e=="")&&k("请选中需要修改的数据🌻"),be(e),S.value.koiOpen(),ue("修改🌻")},S=s(),R=s("用户类型管理"),Y=s();let n=s({userTitle:null,userType:null,userStatus:null,avatar:null,phone:null,remark:null});const I=()=>{n.value={userTitle:null,userType:null,userStatus:null,avatar:null,phone:null,remark:null}},_e=$e({userTitle:[{required:!0,message:"请输入用户名字",trigger:"blur"}],userType:[{required:!0,message:"请输入用户类型",trigger:"blur"}],userStatus:[{required:!0,message:"请输入选择用户状态",trigger:"blur"}]}),w=s(!1),he=()=>{Y.value&&(w.value=!0,Y.value.validate(async o=>{if(o)if(n.value.userId!=null&&n.value.userId!="")try{await Ze(n.value),V("修改成功🌻"),w.value=!1,S.value.koiQuickClose(),I(),v()}catch{w.value=!1,T("修改失败，请刷新重试🌻")}else try{await ea(n.value),V("添加成功🌻"),w.value=!1,S.value.koiQuickClose(),I(),v()}catch{w.value=!1,T("添加失败，请刷新重试🌻")}else k("验证失败，请检查填写内容🌻"),w.value=!1}))},ye=()=>{S.value.koiClose()},ke=o=>{let e=o.userStatus==="0"?"启用":"停用";G("确认要["+e+"]-["+o.userName+"]吗？").then(async()=>{if(I(),!o.userId||!o.userStatus){J("请选择需要修改的数据🌻");return}try{await la(o.userId,o.userStatus),V("修改成功🌻")}catch{T("修改失败，请刷新重试🌻"),C()}}).catch(()=>{k("已取消🌻")})},W=s(),X=async()=>{try{const o=await je(1);Z.value=o.data.data1,$.value=o.data.data2}catch{k("加载角色数据失败")}W.value.koiOpen()},$=s(["1"]),Z=s([{label:"王者农药",value:"1"},{label:"QQ飞车",value:"2"},{label:"举例数据",value:"3"},{label:"三国杀",value:"4"},{label:"和平精英",value:"5"},{label:"刺激战场",value:"6"}]),we=async o=>{try{await He(o),V("分配角色成功🌻")}catch{X(),k("分配角色失败，请重试")}},Ne=o=>{const e=o.userId;if(e==null||e==""){J("请选中需要删除的数据🌻");return}G("您确认需要删除用户名称["+o.userTitle+"]么？").then(async()=>{try{await aa(e),C(),V("删除成功🌻")}catch{C(),T("删除失败，请刷新重试🌻")}}).catch(()=>{k("已取消🌻")})},Te=()=>{if(z.value.length==0){Je("请选择需要删除的数据🌻");return}G("您确认需要进行批量删除么？").then(async()=>{try{await ta(z.value),C(),V("批量删除成功🌻")}catch{T("批量删除失败，请刷新重试🌻"),C()}}).catch(()=>{k("已取消🌻")})};return(o,e)=>{const N=r("el-input"),f=r("el-form-item"),xe=r("el-date-picker"),_=r("el-button"),ee=r("el-form"),g=r("el-col"),Se=r("KoiToolbar"),ae=r("el-row"),m=r("el-table-column"),Ve=r("CircleCloseFilled"),te=r("el-icon"),Ce=r("el-image"),le=r("KoiTag"),Ie=r("el-switch"),oe=r("el-tooltip"),Ue=r("el-table"),De=r("el-pagination"),A=r("el-option"),re=r("el-select"),qe=r("Avatar"),ze=r("KoiUploadImage"),Le=r("KoiDrawer"),Ke=r("el-transfer"),Me=r("KoiDialog"),Pe=r("KoiCard"),Be=K("debounce"),Ee=K("throttle"),y=K("auth"),Re=K("loading");return c(),ne("div",oa,[a(Pe,null,{default:t(()=>[p(a(ee,{inline:!0},{default:t(()=>[a(f,{label:"登录账号",prop:"loginName"},{default:t(()=>[a(N,{placeholder:"请输入登录账号",modelValue:u.value.loginName,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value.loginName=l),clearable:"",style:{width:"200px"},onKeyup:O(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"用户名称",prop:"userName"},{default:t(()=>[a(N,{placeholder:"请输入用户名称",modelValue:u.value.userName,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.userName=l),clearable:"",style:{width:"200px"},onKeyup:O(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"手机号",prop:"phone"},{default:t(()=>[a(N,{placeholder:"请输入手机号",modelValue:u.value.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value.phone=l),clearable:"",style:{width:"200px"},onKeyup:O(v,["enter","native"])},null,8,["modelValue"])]),_:1}),a(f,{label:"登录时间",prop:"loginTime"},{default:t(()=>[a(xe,{modelValue:q.value,"onUpdate:modelValue":e[3]||(e[3]=l=>q.value=l),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),a(f,null,{default:t(()=>[p((c(),b(_,{type:"primary",icon:"search",plain:""},{default:t(()=>e[18]||(e[18]=[h("搜索")])),_:1,__:[18]})),[[Be,de]]),p((c(),b(_,{type:"danger",icon:"refresh",plain:""},{default:t(()=>e[19]||(e[19]=[h("重置")])),_:1,__:[19]})),[[Ee,me]])]),_:1})]),_:1},512),[[se,P.value]]),a(ae,{gutter:10},{default:t(()=>[p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"primary",icon:"plus",plain:"",onClick:e[4]||(e[4]=l=>fe())},{default:t(()=>e[20]||(e[20]=[h("新增")])),_:1,__:[20]})]),_:1})),[[y,["system:role:add"]]]),p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"success",icon:"edit",plain:"",onClick:e[5]||(e[5]=l=>H()),disabled:E.value},{default:t(()=>e[21]||(e[21]=[h("修改")])),_:1,__:[21]},8,["disabled"])]),_:1})),[[y,["system:role:update"]]]),p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"danger",icon:"delete",plain:"",onClick:e[6]||(e[6]=l=>Te()),disabled:j.value},{default:t(()=>e[22]||(e[22]=[h("删除")])),_:1,__:[22]},8,["disabled"])]),_:1})),[[y,["system:role:delete"]]]),p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"primary",icon:"edit",plain:"",onClick:e[7]||(e[7]=l=>X()),disabled:E.value},{default:t(()=>e[23]||(e[23]=[h("分配角色")])),_:1,__:[23]},8,["disabled"])]),_:1})),[[y,["system:role:update"]]]),p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"warning",icon:"download",plain:""},{default:t(()=>e[24]||(e[24]=[h("导出")])),_:1,__:[24]})]),_:1})),[[y,["system:role:export"]]]),p((c(),b(g,{span:1.5},{default:t(()=>[a(_,{type:"info",icon:"upload",plain:""},{default:t(()=>e[25]||(e[25]=[h("导入")])),_:1,__:[25]})]),_:1})),[[y,["system:role:import"]]]),a(Se,{showSearch:P.value,"onUpdate:showSearch":e[8]||(e[8]=l=>P.value=l),onRefreshTable:v},null,8,["showSearch"])]),_:1}),e[28]||(e[28]=U("br",null,null,-1)),p((c(),b(Ue,{border:"",data:F.value.slice((u.value.pageNo-1)*u.value.pageSize,u.value.pageNo*u.value.pageSize),"empty-text":"暂时没有数据哟🌻",onSelectionChange:ve},{default:t(()=>[a(m,{type:"selection",width:"55",align:"center"}),a(m,{label:"序号",prop:"userId",width:"80px",align:"center",type:"index"}),a(m,{label:"登录账号",prop:"loginName",width:"120px",align:"center","show-overflow-tooltip":!0}),a(m,{label:"头像",prop:"avatar",width:"80px",align:"center"},{default:t(l=>[U("div",ra,[a(Ce,{class:"rounded-full w-36px h-36px","preview-teleported":!0,"preview-src-list":[l.row.avatar],src:l.row.avatar!=null&&l.row.avatar!=""?l.row.avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},{error:t(()=>[a(te,{class:"c-[--el-color-primary]",size:36},{default:t(()=>[a(Ve)]),_:1})]),_:2},1032,["preview-src-list","src"])])]),_:1}),a(m,{label:"用户名称",prop:"userName",width:"120px",align:"center","show-overflow-tooltip":!0}),a(m,{label:"邮箱",prop:"email",width:"220px",align:"center","show-overflow-tooltip":!0}),a(m,{label:"手机号",prop:"phone",width:"150px",align:"center","show-overflow-tooltip":!0}),a(m,{label:"用户类型",prop:"userType",width:"100px",align:"center"},{default:t(l=>[a(le,{tagOptions:B.value,value:l.row.userType},null,8,["tagOptions","value"])]),_:1}),a(m,{label:"用户性别",prop:"sex",width:"100px",align:"center"},{default:t(l=>[a(le,{tagOptions:Q.value,value:l.row.sex},null,8,["tagOptions","value"])]),_:1}),a(m,{label:"用户状态",prop:"userStatus",width:"100px",align:"center"},{default:t(l=>[a(Ie,{modelValue:l.row.userStatus,"onUpdate:modelValue":L=>l.row.userStatus=L,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:L=>ke(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(m,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),a(m,{label:"备注",prop:"remark",width:"200px",align:"center","show-overflow-tooltip":!0}),p((c(),b(m,{label:"操作",align:"center",width:"150",fixed:"right"},{default:t(({row:l})=>[a(oe,{content:"修改🌻",placement:"top"},{default:t(()=>[p(a(_,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:L=>H(l)},null,8,["onClick"]),[[y,["system:role:update"]]])]),_:2},1024),a(oe,{content:"删除🌻",placement:"top"},{default:t(()=>[p(a(_,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:L=>Ne(l)},null,8,["onClick"]),[[y,["system:role:delete"]]])]),_:2},1024)]),_:1})),[[y,["system:role:update","system:role:delete"]]])]),_:1},8,["data"])),[[Re,M.value]]),e[29]||(e[29]=U("br",null,null,-1)),p(a(De,{background:"","current-page":u.value.pageNo,"onUpdate:currentPage":e[9]||(e[9]=l=>u.value.pageNo=l),"page-size":u.value.pageSize,"onUpdate:pageSize":e[10]||(e[10]=l=>u.value.pageSize=l),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:D.value,onSizeChange:v,onCurrentChange:v},null,8,["current-page","page-size","total"]),[[se,D.value>0]]),a(Le,{ref_key:"koiDrawerRef",ref:S,title:R.value,onKoiConfirm:he,onKoiCancel:ye,loading:w.value},{content:t(()=>[a(ee,{ref_key:"formRef",ref:Y,rules:_e,model:d(n),"label-width":"80px","status-icon":""},{default:t(()=>[a(ae,null,{default:t(()=>[a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"用户名称",prop:"userTitle"},{default:t(()=>[a(N,{modelValue:d(n).userTitle,"onUpdate:modelValue":e[11]||(e[11]=l=>d(n).userTitle=l),placeholder:"请输入用户名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"用户类型",prop:"userType"},{default:t(()=>[a(re,{placeholder:"请选择用户类型",modelValue:d(n).userType,"onUpdate:modelValue":e[12]||(e[12]=l=>d(n).userType=l),clearable:""},{default:t(()=>[(c(!0),ne(Ae,null,Oe(B.value,l=>(c(),b(A,{key:l.dictValue,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"用户状态",prop:"userStatus"},{default:t(()=>[a(re,{modelValue:d(n).userStatus,"onUpdate:modelValue":e[13]||(e[13]=l=>d(n).userStatus=l),placeholder:"请选择用户状态",clearable:""},{default:t(()=>[a(A,{label:"启用",value:"0"}),a(A,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"用户头像",prop:"avatar"},{default:t(()=>[a(ze,{imageUrl:d(n).avatar,"onUpdate:imageUrl":e[14]||(e[14]=l=>d(n).avatar=l)},{content:t(()=>[a(te,null,{default:t(()=>[a(qe)]),_:1}),e[26]||(e[26]=U("span",null,"请上传头像",-1))]),tip:t(()=>e[27]||(e[27]=[h("图片最大为 3M")])),_:1},8,["imageUrl"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"手机号",prop:"phone"},{default:t(()=>[a(N,{modelValue:d(n).phone,"onUpdate:modelValue":e[15]||(e[15]=l=>d(n).phone=l),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{xs:{span:24},sm:{span:24}},{default:t(()=>[a(f,{label:"用户备注",prop:"remark"},{default:t(()=>[a(N,{modelValue:d(n).remark,"onUpdate:modelValue":e[16]||(e[16]=l=>d(n).remark=l),rows:5,type:"textarea",placeholder:"请输入用户备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),h(" "+Ge(d(n)),1)]),_:1},8,["title","loading"]),a(Me,{ref_key:"koiDialogRef",ref:W,title:"分配角色",height:450,loading:w.value,footerHidden:!0},{content:t(()=>[U("div",na,[a(Ke,{props:{key:"value",label:"label"},titles:["角色列表","拥有角色"],"target-order":"original",filterable:"","filter-placeholder":"关键字搜索",format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},modelValue:$.value,"onUpdate:modelValue":e[17]||(e[17]=l=>$.value=l),data:Z.value,onChange:we},null,8,["modelValue","data"])])]),_:1},8,["loading"])]),_:1,__:[28,29]})])}}}),da=Qe(ua,[["__scopeId","data-v-9f886c79"]]);export{da as default};
