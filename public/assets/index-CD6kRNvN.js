import{a5 as C,d as B,l as d,o as ne,r as a,b as h,c as ie,e as c,a as t,w as l,f as p,g as P,z as k,n as f,B as b,G as M,s as re,M as se,L as z,k as U,K as x,E as T,N as de,a7 as pe}from"./index-D1FNYxzU.js";const ue=u=>C.get("/koi/sysLoginLog/listPage",u),ge=u=>C.post("/koi/sysLoginLog/deleteById/"+u),ce=u=>C.post("/koi/sysLoginLog/batchDelete",u),me={class:"koi-flex"},_e=B({name:"loginlogPage"}),he=B({..._e,setup(u){const K=d(!1),y=d(!0),D=d([{loginId:1,loginName:"YU-ADMINðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"},{loginId:2,loginName:"å¼ å¤§ä»™ðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"},{loginId:3,loginName:"çŽ‹å°†ðŸŒ»",ipAddress:"127.0.0.1",loginAddress:"æ²³å—çœ éƒ‘å·žå¸‚",loginStatus:"0",deviceName:"PC",browser:"Chrome 11",os:"Windows 10",message:"YU-ADMINðŸŒ»",loginTime:"2023-08-08 23:00:00"}]),n=d({pageNo:1,pageSize:10,loginName:"",ipAddress:"",loginStatus:""}),m=d(0),_=d(),L=()=>{_.value=[],n.value={pageNo:1,pageSize:10,loginName:"",ipAddress:"",loginStatus:""}},Y=()=>{n.value.pageNo=1,s()},E=()=>{L(),s()},s=async()=>{m.value=200},v=async()=>{try{const i=await ue(pe(n.value,_.value));D.value=i.data.records,m.value=i.data.total}catch{x("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}};ne(()=>{s()});const S=d([]),W=d(!0),A=d(!0),H=i=>{S.value=i.map(e=>e.loginId),W.value=i.length!=1,A.value=!i.length},R=i=>{const e=i.loginId;if(e==null||e==""){se("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}z("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤ç”¨æˆ·åç§°["+i.loginName+"]ä¹ˆï¼Ÿ").then(async()=>{try{await ge(e),v(),U("åˆ é™¤æˆåŠŸðŸŒ»")}catch{v(),x("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»")}}).catch(()=>{T("å·²å–æ¶ˆðŸŒ»")})},$=()=>{if(S.value.length==0){de("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ðŸŒ»");return}z("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await ce(S.value),v(),U("æ‰¹é‡åˆ é™¤æˆåŠŸðŸŒ»")}catch{x("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ðŸŒ»"),v()}}).catch(()=>{T("å·²å–æ¶ˆðŸŒ»")})};return(i,e)=>{const N=a("el-input"),g=a("el-form-item"),I=a("el-option"),j=a("el-select"),G=a("el-date-picker"),w=a("el-button"),q=a("el-form"),F=a("el-col"),J=a("KoiToolbar"),O=a("el-row"),r=a("el-table-column"),Q=a("el-tag"),X=a("el-tooltip"),Z=a("el-table"),ee=a("el-pagination"),te=a("KoiCard"),oe=h("debounce"),le=h("throttle"),V=h("auth"),ae=h("loading");return c(),ie("div",me,[t(te,null,{default:l(()=>[p(t(q,{inline:!0},{default:l(()=>[t(g,{label:"ç”¨æˆ·åç§°",prop:"loginName"},{default:l(()=>[t(N,{placeholder:"è¯·è¾“å…¥ç”¨æˆ·åç§°",modelValue:n.value.loginName,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.loginName=o),style:{width:"200px"},clearable:"",onKeyup:k(s,["enter","native"])},null,8,["modelValue"])]),_:1}),t(g,{label:"IPåœ°å€",prop:"ipAddress"},{default:l(()=>[t(N,{placeholder:"è¯·è¾“å…¥IPåœ°å€",modelValue:n.value.ipAddress,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.ipAddress=o),style:{width:"200px"},clearable:"",onKeyup:k(s,["enter","native"])},null,8,["modelValue"])]),_:1}),t(g,{label:"ç™»å½•çŠ¶æ€",prop:"loginStatus"},{default:l(()=>[t(j,{placeholder:"è¯·é€‰æ‹©æ—¥å¿—çŠ¶æ€",modelValue:n.value.loginStatus,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.loginStatus=o),style:{width:"200px"},clearable:"",onKeyup:k(s,["enter","native"])},{default:l(()=>[t(I,{label:"ç™»å½•æˆåŠŸ",value:"0"}),t(I,{label:"ç™»å½•å¤±è´¥",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"è®¿é—®æ—¶é—´",prop:"loginTime"},{default:l(()=>[t(G,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=o=>_.value=o),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":"å¼€å§‹æ—¥æœŸ","range-separator":"è‡³","end-placeholder":"ç»“æŸæ—¥æœŸ","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),t(g,null,{default:l(()=>[p((c(),f(w,{type:"primary",icon:"search",plain:""},{default:l(()=>e[8]||(e[8]=[b("æœç´¢")])),_:1,__:[8]})),[[oe,Y]]),p((c(),f(w,{type:"danger",icon:"refresh",plain:""},{default:l(()=>e[9]||(e[9]=[b("é‡ç½®")])),_:1,__:[9]})),[[le,E]])]),_:1})]),_:1},512),[[M,y.value]]),t(O,{gutter:10},{default:l(()=>[p((c(),f(F,{span:1.5},{default:l(()=>[t(w,{type:"danger",icon:"delete",plain:"",onClick:e[4]||(e[4]=o=>$()),disabled:A.value},{default:l(()=>e[10]||(e[10]=[b("åˆ é™¤")])),_:1,__:[10]},8,["disabled"])]),_:1})),[[V,["system:role:delete"]]]),t(J,{showSearch:y.value,"onUpdate:showSearch":e[5]||(e[5]=o=>y.value=o),onRefreshTable:s},null,8,["showSearch"])]),_:1}),e[11]||(e[11]=P("br",null,null,-1)),p((c(),f(Z,{border:"",data:D.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸðŸŒ»",onSelectionChange:H},{default:l(()=>[t(r,{type:"selection",width:"55",align:"center"}),t(r,{label:"åºå·",prop:"loginId",width:"80px",align:"center",type:"index"}),t(r,{label:"ç™»å½•ç”¨æˆ·",prop:"loginName",width:"130px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"IPåœ°å€",prop:"ipAddress",width:"160px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"ç™»å½•åœ°å€",prop:"loginAddress",width:"260px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"ç™»å½•çŠ¶æ€",prop:"loginStatus",width:"100px",align:"center","show-overflow-tooltip":!0},{default:l(o=>[t(Q,{type:o.row.loginStatus=="0"?"primary":o.row.loginStatus=="1"?"danger":"warning"},{default:l(()=>[b(re(o.row.loginStatus=="0"?"ç™»å½•æˆåŠŸ":o.row.loginStatus=="1"?"ç™»å½•å¤±è´¥":"æœªçŸ¥çŠ¶æ€"),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"è®¾å¤‡åç§°",prop:"deviceName",width:"150px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"æµè§ˆå™¨",prop:"browser",width:"150px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"æ“ä½œç³»ç»Ÿ",prop:"os",width:"150px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"ç™»å½•ä¿¡æ¯",prop:"message",width:"150px",align:"center","show-overflow-tooltip":!0}),t(r,{label:"ç™»å½•æ—¶é—´",prop:"loginTime",width:"180px",align:"center"}),t(r,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:l(({row:o})=>[t(X,{content:"åˆ é™¤ðŸŒ»",placement:"top"},{default:l(()=>[p(t(w,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:ve=>R(o)},null,8,["onClick"]),[[V,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ae,K.value]]),e[12]||(e[12]=P("br",null,null,-1)),p(t(ee,{background:"","current-page":n.value.pageNo,"onUpdate:currentPage":e[6]||(e[6]=o=>n.value.pageNo=o),"page-size":n.value.pageSize,"onUpdate:pageSize":e[7]||(e[7]=o=>n.value.pageSize=o),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:m.value,onSizeChange:s,onCurrentChange:s},null,8,["current-page","page-size","total"]),[[M,m.value>0]])]),_:1,__:[11,12]})])}}});export{he as default};
