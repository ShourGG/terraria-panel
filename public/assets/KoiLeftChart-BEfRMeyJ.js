import{i as F}from"./index-CIGBWQpf.js";import{d as S,l as u,o as b,O as A,P as z,c as L,e as _,g as m,_ as k}from"./index-rAFU2v1v.js";const $={class:"chart-container"},B=S({__name:"KoiLeftChart",setup(P){const g=u(),o=u(null),p=u({cpu:{usage:0,cores:0,model:""},memory:{total:0,used:0,free:0,usagePercent:0},disk:{total:0,used:0,free:0,usagePercent:0}}),a=e=>{if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+r[s]},i=u(void 0);b(()=>{y(),v(),d(),window.addEventListener("resize",d),x()}),A(()=>{var e;(e=o.value)==null||e.dispose(),o.value=null,i.value&&(clearInterval(i.value),i.value=void 0),window.removeEventListener("resize",d)});const y=()=>{o.value=F(g.value),w(),o.value.on("mouseover",()=>{i.value&&clearInterval(i.value)}),o.value.on("mouseout",()=>{x()})},v=async()=>{try{const e=await z.get("/api/linux/system/resources");p.value=e.data,w()}catch{}},w=()=>{var C;const{cpu:e,memory:t,disk:r}=p.value,s={tooltip:{formatter:function(n){const{name:l,value:c}=n;if(l==="CPU")return`CPU使用率<br/>使用: ${c.toFixed(1)}%<br/>核心数: ${e.cores||"未知"}`;if(l==="内存"){const f=a(t.total),h=a(t.used);return`内存使用率<br/>使用: ${c.toFixed(1)}%<br/>已用: ${h}<br/>总量: ${f}`}else if(l==="磁盘"){const f=a(r.total),h=a(r.used);return`磁盘使用率<br/>使用: ${c.toFixed(1)}%<br/>已用: ${h}<br/>总量: ${f}`}return`${l}: ${c.toFixed(1)}%`}},grid:{left:"0",right:"0",bottom:"0",top:"0",containLabel:!0},series:[{name:"CPU使用率",type:"gauge",center:["20%","50%"],radius:"80%",min:0,max:100,startAngle:200,endAngle:-20,splitNumber:10,itemStyle:{color:"#58D9F9"},progress:{show:!0,width:20},pointer:{show:!0,length:"60%",width:6},axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},axisTick:{distance:-40,length:8,lineStyle:{color:"#fff",width:2}},splitLine:{distance:-38,length:12,lineStyle:{color:"#fff",width:2}},axisLabel:{distance:-15,color:"#999",fontSize:12},anchor:{show:!1},title:{show:!0,offsetCenter:[0,"70%"],fontSize:16,fontWeight:"bold",color:"#333",fontFamily:"Arial"},detail:{valueAnimation:!0,fontSize:30,offsetCenter:[0,"30%"],formatter:function(n){return n.toFixed(1)+"%"},color:"inherit"},data:[{value:e.usage||0,name:"CPU"}]},{name:"内存使用率",type:"gauge",center:["50%","50%"],radius:"80%",min:0,max:100,startAngle:200,endAngle:-20,splitNumber:10,itemStyle:{color:"#58D9F9"},progress:{show:!0,width:20},pointer:{show:!0,length:"60%",width:6},axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},axisTick:{distance:-40,length:8,lineStyle:{color:"#fff",width:2}},splitLine:{distance:-38,length:12,lineStyle:{color:"#fff",width:2}},axisLabel:{distance:-15,color:"#999",fontSize:12},anchor:{show:!1},title:{show:!0,offsetCenter:[0,"70%"],fontSize:16,fontWeight:"bold",color:"#333",fontFamily:"Arial"},detail:{valueAnimation:!0,fontSize:30,offsetCenter:[0,"30%"],formatter:function(n){return n.toFixed(1)+"%"},color:"inherit"},data:[{value:t.usagePercent||0,name:"内存"}]},{name:"磁盘使用率",type:"gauge",center:["80%","50%"],radius:"80%",min:0,max:100,startAngle:200,endAngle:-20,splitNumber:10,itemStyle:{color:"#58D9F9"},progress:{show:!0,width:20},pointer:{show:!0,length:"60%",width:6},axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},axisTick:{distance:-40,length:8,lineStyle:{color:"#fff",width:2}},splitLine:{distance:-38,length:12,lineStyle:{color:"#fff",width:2}},axisLabel:{distance:-15,color:"#999",fontSize:12},anchor:{show:!1},title:{show:!0,offsetCenter:[0,"70%"],fontSize:16,fontWeight:"bold",color:"#333",fontFamily:"Arial"},detail:{valueAnimation:!0,fontSize:30,offsetCenter:[0,"30%"],formatter:function(n){return n.toFixed(1)+"%"},color:"inherit"},data:[{value:r.usagePercent||0,name:"磁盘"}]}]};(C=o.value)==null||C.setOption(s)},x=()=>{i.value=window.setInterval(()=>{v()},5e3)},d=()=>{var e;(e=o.value)==null||e.resize()};return(e,t)=>(_(),L("div",null,[t[0]||(t[0]=m("h3",{class:"mb-4"},"系统资源监控",-1)),m("div",$,[m("div",{ref_key:"refChart",ref:g,style:{height:"350px"}},null,512)])]))}}),M=k(B,[["__scopeId","data-v-0cecd1a0"]]);export{M as default};
