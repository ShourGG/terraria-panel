import{a5 as N,d as Z,l as u,o as we,m as Ne,r as n,b as A,c as Ce,e as g,a as t,w as a,f as m,g as W,z as E,n as h,B as k,G as J,q as i,s as Se,R as X,E as V,k as U,K as w,L as R,M as L,N as xe}from"./index-D1FNYxzU.js";const Ie=r=>N.get("/koi/sysPost/listPage",r),Ve=r=>N.get("/koi/sysPost/getById/"+r),Ue=r=>N.post("/koi/sysPost/update",r),De=r=>N.post("/koi/sysPost/add",r),Me=r=>N.post("/koi/sysPost/deleteById/"+r),Be=r=>N.post("/koi/sysPost/batchDelete",r),Te=(r,Y)=>N.post("/koi/sysPost/updateStatus/"+r+"/"+Y),Ae={class:"koi-flex"},Ye=Z({name:"postPage"}),Ke=Z({...Ye,setup(r){const Y=u(!1),P=u(!0),O=u([{postId:1,postCode:"CEO",postName:"è‘£äº‹é•¿ğŸŒ»",sorted:1,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:2,postCode:"PM",postName:"é¡¹ç›®ç»ç†ğŸŒ»",sorted:2,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:3,postCode:"HR",postName:"äººåŠ›èµ„æºğŸŒ»",sorted:3,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:4,postCode:"NORMAL",postName:"æ™®é€šå‘˜å·¥ğŸŒ»",sorted:4,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"},{postId:5,postCode:"TECHNOLOGY",postName:"æŠ€æœ¯å²—ä½ğŸŒ»",sorted:4,postStatus:"0",createBy:"YU-ADMINğŸŒ»",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMINğŸŒ»",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMINğŸŒ»"}]),p=u({pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}),D=u(0),ee=()=>{p.value={pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}},te=()=>{p.value.pageNo=1,c()},ae=()=>{ee(),c()},c=async()=>{D.value=200},x=async()=>{try{const o=await Ie(p.value);O.value=o.data.records,D.value=o.data.total}catch{w("æ•°æ®æŸ¥è¯¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}};we(()=>{c()});const M=u([]),$=u(!0),q=u(!0),le=o=>{M.value=o.map(e=>e.postId),$.value=o.length!=1,q.value=!o.length},oe=()=>{I(),K.value="å²—ä½æ·»åŠ ",s.value.postStatus="0",C.value.koiOpen(),X("æ·»åŠ ğŸŒ»")},se=async o=>{if(o==null||o==""){L("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»");return}try{const e=await Ve(o);s.value=e.data}catch{w("æ•°æ®è·å–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}},G=async o=>{I(),K.value="å²—ä½ä¿®æ”¹";const e=o?o.postId:M.value[0];(e==null||e=="")&&V("è¯·é€‰ä¸­éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»"),se(e),C.value.koiOpen(),X("ä¿®æ”¹ğŸŒ»")},C=u(),K=u("å²—ä½ç±»å‹ç®¡ç†"),z=u();let s=u({postName:null,postCode:null,postStatus:null,sorted:1,remark:null});const I=()=>{s.value={postName:null,postCode:null,postStatus:null,sorted:1,remark:null}},ne=Ne({postName:[{required:!0,message:"è¯·è¾“å…¥å²—ä½åå­—",trigger:"blur"}],postCode:[{required:!0,message:"è¯·è¾“å…¥å²—ä½ç¼–ç ",trigger:"blur"}],postStatus:[{required:!0,message:"è¯·è¾“å…¥é€‰æ‹©å²—ä½çŠ¶æ€",trigger:"blur"}]}),y=u(!1),re=()=>{z.value&&(y.value=!0,z.value.validate(async o=>{if(o)if(s.value.postId!=null&&s.value.postId!="")try{await Ue(s.value),U("ä¿®æ”¹æˆåŠŸğŸŒ»"),y.value=!1,C.value.koiQuickClose(),I(),c()}catch{y.value=!1,w("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}else try{await De(s.value),U("æ·»åŠ æˆåŠŸğŸŒ»"),y.value=!1,C.value.koiQuickClose(),I(),c()}catch{y.value=!1,w("æ·»åŠ å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}else V("éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¡«å†™å†…å®¹ğŸŒ»"),y.value=!1}))},pe=()=>{C.value.koiClose()},ue=o=>{let e=o.postStatus==="0"?"å¯ç”¨":"åœç”¨";R("ç¡®è®¤è¦["+e+"]-["+o.postName+"]å—ï¼Ÿ").then(async()=>{if(I(),!o.postId||!o.postStatus){L("è¯·é€‰æ‹©éœ€è¦ä¿®æ”¹çš„æ•°æ®ğŸŒ»");return}try{await Te(o.postId,o.postStatus),U("ä¿®æ”¹æˆåŠŸğŸŒ»")}catch{x(),w("ä¿®æ”¹å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})},de=o=>{const e=o.postId;if(e==null||e==""){L("è¯·é€‰ä¸­éœ€è¦åˆ é™¤çš„æ•°æ®ğŸŒ»");return}R("æ‚¨ç¡®è®¤éœ€è¦åˆ é™¤å²—ä½åç§°["+o.postName+"]ä¹ˆï¼Ÿ").then(async()=>{try{await Me(e),x(),U("åˆ é™¤æˆåŠŸğŸŒ»")}catch{x(),w("åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})},ie=()=>{if(M.value.length==0){xe("è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„æ•°æ®ğŸŒ»");return}R("æ‚¨ç¡®è®¤éœ€è¦è¿›è¡Œæ‰¹é‡åˆ é™¤ä¹ˆï¼Ÿ").then(async()=>{try{await Be(M.value),x(),U("æ‰¹é‡åˆ é™¤æˆåŠŸğŸŒ»")}catch{x(),w("æ‰¹é‡åˆ é™¤å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•ğŸŒ»")}}).catch(()=>{V("å·²å–æ¶ˆğŸŒ»")})};return(o,e)=>{const b=n("el-input"),v=n("el-form-item"),B=n("el-option"),H=n("el-select"),_=n("el-button"),Q=n("el-form"),f=n("el-col"),ce=n("KoiToolbar"),j=n("el-row"),d=n("el-table-column"),me=n("el-switch"),F=n("el-tooltip"),ve=n("el-table"),fe=n("el-pagination"),_e=n("el-input-number"),ge=n("KoiDrawer"),ye=n("KoiCard"),be=A("debounce"),he=A("throttle"),S=A("auth"),ke=A("loading");return g(),Ce("div",Ae,[t(ye,null,{default:a(()=>[m(t(Q,{inline:!0},{default:a(()=>[t(v,{label:"å²—ä½åç§°",prop:"postName"},{default:a(()=>[t(b,{placeholder:"è¯·è¾“å…¥å²—ä½åç§°",modelValue:p.value.postName,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value.postName=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"å²—ä½ç¼–ç ",prop:"postCode"},{default:a(()=>[t(b,{placeholder:"è¯·è¾“å…¥å²—ä½ç¼–ç ",modelValue:p.value.postCode,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value.postCode=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"å²—ä½çŠ¶æ€",prop:"postStatus"},{default:a(()=>[t(H,{placeholder:"è¯·é€‰æ‹©å²—ä½çŠ¶æ€",modelValue:p.value.postStatus,"onUpdate:modelValue":e[2]||(e[2]=l=>p.value.postStatus=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},{default:a(()=>[t(B,{label:"å¯ç”¨",value:"0"}),t(B,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[m((g(),h(_,{type:"primary",icon:"search",plain:""},{default:a(()=>e[14]||(e[14]=[k("æœç´¢")])),_:1,__:[14]})),[[be,te]]),m((g(),h(_,{type:"danger",icon:"refresh",plain:""},{default:a(()=>e[15]||(e[15]=[k("é‡ç½®")])),_:1,__:[15]})),[[he,ae]])]),_:1})]),_:1},512),[[J,P.value]]),t(j,{gutter:10},{default:a(()=>[m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=l=>oe())},{default:a(()=>e[16]||(e[16]=[k("æ–°å¢")])),_:1,__:[16]})]),_:1})),[[S,["system:role:add"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=l=>G()),disabled:$.value},{default:a(()=>e[17]||(e[17]=[k("ä¿®æ”¹")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[S,["system:role:update"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=l=>ie()),disabled:q.value},{default:a(()=>e[18]||(e[18]=[k("åˆ é™¤")])),_:1,__:[18]},8,["disabled"])]),_:1})),[[S,["system:role:delete"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"warning",icon:"download",plain:""},{default:a(()=>e[19]||(e[19]=[k("å¯¼å‡º")])),_:1,__:[19]})]),_:1})),[[S,["system:role:export"]]]),t(ce,{showSearch:P.value,"onUpdate:showSearch":e[6]||(e[6]=l=>P.value=l),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=W("br",null,null,-1)),m((g(),h(ve,{border:"",data:O.value,"empty-text":"æš‚æ—¶æ²¡æœ‰æ•°æ®å“ŸğŸŒ»",onSelectionChange:le},{default:a(()=>[t(d,{type:"selection",width:"55",align:"center"}),t(d,{label:"åºå·",prop:"postId",width:"80px",align:"center",type:"index"}),t(d,{label:"å²—ä½åç§°",prop:"postName",width:"180px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½ç¼–ç ",prop:"postCode",width:"130px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½çŠ¶æ€",prop:"postStatus",width:"100px",align:"center"},{default:a(l=>[t(me,{modelValue:l.row.postStatus,"onUpdate:modelValue":T=>l.row.postStatus=T,"active-text":"å¯ç”¨","inactive-text":"åœç”¨","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:T=>ue(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(d,{label:"æ˜¾ç¤ºé¡ºåº",prop:"sorted",width:"100px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"å²—ä½å¤‡æ³¨",prop:"remark",width:"220px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"åˆ›å»ºæ—¶é—´",prop:"createTime",width:"180px",align:"center"}),t(d,{label:"åˆ›å»ºäºº",prop:"createBy",width:"150px",align:"center"}),t(d,{label:"ä¿®æ”¹äºº",prop:"updateBy",width:"150px",align:"center"}),t(d,{label:"ä¿®æ”¹æ—¶é—´",prop:"updateTime",width:"180px",align:"center"}),t(d,{label:"æ“ä½œ",align:"center",width:"120",fixed:"right"},{default:a(({row:l})=>[t(F,{content:"ä¿®æ”¹ğŸŒ»",placement:"top"},{default:a(()=>[m(t(_,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:T=>G(l)},null,8,["onClick"]),[[S,["system:role:update"]]])]),_:2},1024),t(F,{content:"åˆ é™¤ğŸŒ»",placement:"top"},{default:a(()=>[m(t(_,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:T=>de(l)},null,8,["onClick"]),[[S,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,Y.value]]),e[21]||(e[21]=W("br",null,null,-1)),m(t(fe,{background:"","current-page":p.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=l=>p.value.pageNo=l),"page-size":p.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=l=>p.value.pageSize=l),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:D.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[J,D.value>0]]),t(ge,{ref_key:"koiDrawerRef",ref:C,title:K.value,onKoiConfirm:re,onKoiCancel:pe,loading:y.value},{content:a(()=>[t(Q,{ref_key:"formRef",ref:z,rules:ne,model:i(s),"label-width":"80px","status-icon":""},{default:a(()=>[t(j,null,{default:a(()=>[t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"å²—ä½åç§°",prop:"postName"},{default:a(()=>[t(b,{modelValue:i(s).postName,"onUpdate:modelValue":e[9]||(e[9]=l=>i(s).postName=l),placeholder:"è¯·è¾“å…¥å²—ä½åç§°",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"å²—ä½ç¼–ç ",prop:"postCode"},{default:a(()=>[t(b,{modelValue:i(s).postCode,"onUpdate:modelValue":e[10]||(e[10]=l=>i(s).postCode=l),placeholder:"è¯·è¾“å…¥å²—ä½ç¼–ç ",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"å²—ä½çŠ¶æ€",prop:"postStatus"},{default:a(()=>[t(H,{modelValue:i(s).postStatus,"onUpdate:modelValue":e[11]||(e[11]=l=>i(s).postStatus=l),placeholder:"è¯·é€‰æ‹©å²—ä½çŠ¶æ€",clearable:""},{default:a(()=>[t(B,{label:"å¯ç”¨",value:"0"}),t(B,{label:"åœç”¨",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"æ’åº",prop:"sorted"},{default:a(()=>[t(_e,{modelValue:i(s).sorted,"onUpdate:modelValue":e[12]||(e[12]=l=>i(s).sorted=l),min:0,step:1,placeholder:"è¯·è¾“å…¥æ•°å­—"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"å²—ä½å¤‡æ³¨",prop:"remark"},{default:a(()=>[t(b,{modelValue:i(s).remark,"onUpdate:modelValue":e[13]||(e[13]=l=>i(s).remark=l),rows:5,type:"textarea",placeholder:"è¯·è¾“å…¥å²—ä½å¤‡æ³¨"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),k(" "+Se(i(s)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{Ke as default};
