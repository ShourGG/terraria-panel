import{a5 as N,d as Z,l as u,o as we,m as Ne,r as n,b as A,c as Ce,e as g,a as t,w as a,f as m,g as W,z as E,n as h,B as k,G as J,q as i,s as Se,R as X,E as V,k as U,K as w,L as R,M as L,N as xe}from"./index-D1FNYxzU.js";const Ie=r=>N.get("/koi/sysPost/listPage",r),Ve=r=>N.get("/koi/sysPost/getById/"+r),Ue=r=>N.post("/koi/sysPost/update",r),De=r=>N.post("/koi/sysPost/add",r),Me=r=>N.post("/koi/sysPost/deleteById/"+r),Be=r=>N.post("/koi/sysPost/batchDelete",r),Te=(r,Y)=>N.post("/koi/sysPost/updateStatus/"+r+"/"+Y),Ae={class:"koi-flex"},Ye=Z({name:"postPage"}),Ke=Z({...Ye,setup(r){const Y=u(!1),P=u(!0),O=u([{postId:1,postCode:"CEO",postName:"董事长🌻",sorted:1,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:2,postCode:"PM",postName:"项目经理🌻",sorted:2,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:3,postCode:"HR",postName:"人力资源🌻",sorted:3,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:4,postCode:"NORMAL",postName:"普通员工🌻",sorted:4,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"},{postId:5,postCode:"TECHNOLOGY",postName:"技术岗位🌻",sorted:4,postStatus:"0",createBy:"YU-ADMIN🌻",createTime:"2023-08-22 12:00:00",updateBy:"YU-ADMIN🌻",updateTime:"2023-08-22 12:00:00",remark:"YU-ADMIN🌻"}]),p=u({pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}),D=u(0),ee=()=>{p.value={pageNo:1,pageSize:10,postName:"",postCode:"",postStatus:""}},te=()=>{p.value.pageNo=1,c()},ae=()=>{ee(),c()},c=async()=>{D.value=200},x=async()=>{try{const o=await Ie(p.value);O.value=o.data.records,D.value=o.data.total}catch{w("数据查询失败，请刷新重试🌻")}};we(()=>{c()});const M=u([]),$=u(!0),q=u(!0),le=o=>{M.value=o.map(e=>e.postId),$.value=o.length!=1,q.value=!o.length},oe=()=>{I(),K.value="岗位添加",s.value.postStatus="0",C.value.koiOpen(),X("添加🌻")},se=async o=>{if(o==null||o==""){L("请选择需要修改的数据🌻");return}try{const e=await Ve(o);s.value=e.data}catch{w("数据获取失败，请刷新重试🌻")}},G=async o=>{I(),K.value="岗位修改";const e=o?o.postId:M.value[0];(e==null||e=="")&&V("请选中需要修改的数据🌻"),se(e),C.value.koiOpen(),X("修改🌻")},C=u(),K=u("岗位类型管理"),z=u();let s=u({postName:null,postCode:null,postStatus:null,sorted:1,remark:null});const I=()=>{s.value={postName:null,postCode:null,postStatus:null,sorted:1,remark:null}},ne=Ne({postName:[{required:!0,message:"请输入岗位名字",trigger:"blur"}],postCode:[{required:!0,message:"请输入岗位编码",trigger:"blur"}],postStatus:[{required:!0,message:"请输入选择岗位状态",trigger:"blur"}]}),y=u(!1),re=()=>{z.value&&(y.value=!0,z.value.validate(async o=>{if(o)if(s.value.postId!=null&&s.value.postId!="")try{await Ue(s.value),U("修改成功🌻"),y.value=!1,C.value.koiQuickClose(),I(),c()}catch{y.value=!1,w("修改失败，请刷新重试🌻")}else try{await De(s.value),U("添加成功🌻"),y.value=!1,C.value.koiQuickClose(),I(),c()}catch{y.value=!1,w("添加失败，请刷新重试🌻")}else V("验证失败，请检查填写内容🌻"),y.value=!1}))},pe=()=>{C.value.koiClose()},ue=o=>{let e=o.postStatus==="0"?"启用":"停用";R("确认要["+e+"]-["+o.postName+"]吗？").then(async()=>{if(I(),!o.postId||!o.postStatus){L("请选择需要修改的数据🌻");return}try{await Te(o.postId,o.postStatus),U("修改成功🌻")}catch{x(),w("修改失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})},de=o=>{const e=o.postId;if(e==null||e==""){L("请选中需要删除的数据🌻");return}R("您确认需要删除岗位名称["+o.postName+"]么？").then(async()=>{try{await Me(e),x(),U("删除成功🌻")}catch{x(),w("删除失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})},ie=()=>{if(M.value.length==0){xe("请选择需要删除的数据🌻");return}R("您确认需要进行批量删除么？").then(async()=>{try{await Be(M.value),x(),U("批量删除成功🌻")}catch{x(),w("批量删除失败，请刷新重试🌻")}}).catch(()=>{V("已取消🌻")})};return(o,e)=>{const b=n("el-input"),v=n("el-form-item"),B=n("el-option"),H=n("el-select"),_=n("el-button"),Q=n("el-form"),f=n("el-col"),ce=n("KoiToolbar"),j=n("el-row"),d=n("el-table-column"),me=n("el-switch"),F=n("el-tooltip"),ve=n("el-table"),fe=n("el-pagination"),_e=n("el-input-number"),ge=n("KoiDrawer"),ye=n("KoiCard"),be=A("debounce"),he=A("throttle"),S=A("auth"),ke=A("loading");return g(),Ce("div",Ae,[t(ye,null,{default:a(()=>[m(t(Q,{inline:!0},{default:a(()=>[t(v,{label:"岗位名称",prop:"postName"},{default:a(()=>[t(b,{placeholder:"请输入岗位名称",modelValue:p.value.postName,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value.postName=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"岗位编码",prop:"postCode"},{default:a(()=>[t(b,{placeholder:"请输入岗位编码",modelValue:p.value.postCode,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value.postCode=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(v,{label:"岗位状态",prop:"postStatus"},{default:a(()=>[t(H,{placeholder:"请选择岗位状态",modelValue:p.value.postStatus,"onUpdate:modelValue":e[2]||(e[2]=l=>p.value.postStatus=l),clearable:"",style:{width:"240px"},onKeyup:E(c,["enter","native"])},{default:a(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[m((g(),h(_,{type:"primary",icon:"search",plain:""},{default:a(()=>e[14]||(e[14]=[k("搜索")])),_:1,__:[14]})),[[be,te]]),m((g(),h(_,{type:"danger",icon:"refresh",plain:""},{default:a(()=>e[15]||(e[15]=[k("重置")])),_:1,__:[15]})),[[he,ae]])]),_:1})]),_:1},512),[[J,P.value]]),t(j,{gutter:10},{default:a(()=>[m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=l=>oe())},{default:a(()=>e[16]||(e[16]=[k("新增")])),_:1,__:[16]})]),_:1})),[[S,["system:role:add"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=l=>G()),disabled:$.value},{default:a(()=>e[17]||(e[17]=[k("修改")])),_:1,__:[17]},8,["disabled"])]),_:1})),[[S,["system:role:update"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=l=>ie()),disabled:q.value},{default:a(()=>e[18]||(e[18]=[k("删除")])),_:1,__:[18]},8,["disabled"])]),_:1})),[[S,["system:role:delete"]]]),m((g(),h(f,{span:1.5},{default:a(()=>[t(_,{type:"warning",icon:"download",plain:""},{default:a(()=>e[19]||(e[19]=[k("导出")])),_:1,__:[19]})]),_:1})),[[S,["system:role:export"]]]),t(ce,{showSearch:P.value,"onUpdate:showSearch":e[6]||(e[6]=l=>P.value=l),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[20]||(e[20]=W("br",null,null,-1)),m((g(),h(ve,{border:"",data:O.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:le},{default:a(()=>[t(d,{type:"selection",width:"55",align:"center"}),t(d,{label:"序号",prop:"postId",width:"80px",align:"center",type:"index"}),t(d,{label:"岗位名称",prop:"postName",width:"180px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位编码",prop:"postCode",width:"130px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位状态",prop:"postStatus",width:"100px",align:"center"},{default:a(l=>[t(me,{modelValue:l.row.postStatus,"onUpdate:modelValue":T=>l.row.postStatus=T,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:T=>ue(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(d,{label:"显示顺序",prop:"sorted",width:"100px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"岗位备注",prop:"remark",width:"220px",align:"center","show-overflow-tooltip":!0}),t(d,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),t(d,{label:"创建人",prop:"createBy",width:"150px",align:"center"}),t(d,{label:"修改人",prop:"updateBy",width:"150px",align:"center"}),t(d,{label:"修改时间",prop:"updateTime",width:"180px",align:"center"}),t(d,{label:"操作",align:"center",width:"120",fixed:"right"},{default:a(({row:l})=>[t(F,{content:"修改🌻",placement:"top"},{default:a(()=>[m(t(_,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:T=>G(l)},null,8,["onClick"]),[[S,["system:role:update"]]])]),_:2},1024),t(F,{content:"删除🌻",placement:"top"},{default:a(()=>[m(t(_,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:T=>de(l)},null,8,["onClick"]),[[S,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,Y.value]]),e[21]||(e[21]=W("br",null,null,-1)),m(t(fe,{background:"","current-page":p.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=l=>p.value.pageNo=l),"page-size":p.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=l=>p.value.pageSize=l),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:D.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[J,D.value>0]]),t(ge,{ref_key:"koiDrawerRef",ref:C,title:K.value,onKoiConfirm:re,onKoiCancel:pe,loading:y.value},{content:a(()=>[t(Q,{ref_key:"formRef",ref:z,rules:ne,model:i(s),"label-width":"80px","status-icon":""},{default:a(()=>[t(j,null,{default:a(()=>[t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"岗位名称",prop:"postName"},{default:a(()=>[t(b,{modelValue:i(s).postName,"onUpdate:modelValue":e[9]||(e[9]=l=>i(s).postName=l),placeholder:"请输入岗位名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"岗位编码",prop:"postCode"},{default:a(()=>[t(b,{modelValue:i(s).postCode,"onUpdate:modelValue":e[10]||(e[10]=l=>i(s).postCode=l),placeholder:"请输入岗位编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"岗位状态",prop:"postStatus"},{default:a(()=>[t(H,{modelValue:i(s).postStatus,"onUpdate:modelValue":e[11]||(e[11]=l=>i(s).postStatus=l),placeholder:"请选择岗位状态",clearable:""},{default:a(()=>[t(B,{label:"启用",value:"0"}),t(B,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"排序",prop:"sorted"},{default:a(()=>[t(_e,{modelValue:i(s).sorted,"onUpdate:modelValue":e[12]||(e[12]=l=>i(s).sorted=l),min:0,step:1,placeholder:"请输入数字"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,{xs:{span:24},sm:{span:24}},{default:a(()=>[t(v,{label:"岗位备注",prop:"remark"},{default:a(()=>[t(b,{modelValue:i(s).remark,"onUpdate:modelValue":e[13]||(e[13]=l=>i(s).remark=l),rows:5,type:"textarea",placeholder:"请输入岗位备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),k(" "+Se(i(s)),1)]),_:1},8,["title","loading"])]),_:1,__:[20,21]})])}}});export{Ke as default};
