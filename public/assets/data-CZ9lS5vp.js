import{d as de,l as u,o as Ne,F as ze,m as Be,c as F,a as t,w as l,r as d,E as h,f as v,g as ee,G as te,z as A,I as le,J as ae,n as g,B as V,b as M,q as r,s as Me,k as w,K as x,L as Q,M as j,N as Oe,e as s}from"./index-rAFU2v1v.js";import{l as oe,a as Pe,b as ne,u as Ee,c as Re,d as $e,e as qe,f as Fe,g as Ae}from"./index-BYNuxRiE.js";const Qe={class:"koi-flex"},je=de({name:"dictDataPage"}),Ye=de({...je,setup(Ge){const O=u(!1),P=u(!0),I=u([{dictId:1,dictType:"YU-ADMIN🌻",dictLabel:"天才",dictStatus:"0",sorted:1,remark:"超级管理员",createTime:"2023-08-08 23:00:00"},{dictId:2,dictType:"张大仙",dictLabel:"小天才",dictStatus:"0",sorted:2,remark:"虎牙688，每晚七点半，不见不散！",createTime:"2023-08-08 23:00:00"},{dictId:3,dictType:"菜鸡",dictLabel:"干饭",dictStatus:"1",sorted:3,remark:"小小菜鸡，可笑可笑",createTime:"2023-08-08 23:00:00"}]),i=u({pageNo:1,pageSize:10,dictType:"",dictLabel:"",dictStatus:""}),U=u(0),ue=()=>{i.value={pageNo:1,pageSize:10,dictLabel:"",dictStatus:"",dictType:K.value}},ie=()=>{i.value.pageNo=1,c()},re=()=>{ue(),c()},c=async()=>{try{O.value=!0,I.value=[];const o=await ne(i.value);I.value=o.data.records,U.value=o.data.total,O.value=!1}catch{h("数据查询失败，请刷新重试🌻")}},T=async()=>{try{const o=await ne(i.value);I.value=o.data.records,U.value=o.data.total}catch{h("数据查询失败，请刷新重试🌻")}},se=ze();let K=u();Ne(()=>{K.value=se.params.dictType||"",i.value.dictType=K.value,c(),pe(),ce(),G()});const E=u(),ce=async()=>{try{E.value=[];const o=await oe("sys_tag_type");E.value=o.data}catch{}},R=u(),G=async()=>{try{R.value=[];const o=await oe(i.value.dictType);R.value=o.data}catch{}},J=u(),pe=async()=>{try{const o=await Pe();J.value=o.data}catch{}},N=u([]),W=u(!0),Y=u(!0),me=o=>{N.value=o.map(e=>e.dictId),W.value=o.length!=1,Y.value=!o.length},ve=()=>{C(),$.value="字典添加",n.value.dictStatus="0",n.value.dictType=K.value,k.value.koiOpen(),w("添加🌻")},fe=async o=>{if(o==null||o==""){j("请选择需要修改的数据🌻");return}try{const e=await Ae(o);n.value=e.data}catch{x("数据获取失败，请刷新重试🌻")}},H=async o=>{C(),$.value="字典修改";const e=o?o.dictId:N.value[0];(e==null||e=="")&&h("请选中需要修改的数据🌻"),fe(e),k.value.koiOpen(),w("修改🌻")},k=u(),$=u("字典管理"),q=u();let n=u({dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null});const C=()=>{n.value={dictId:null,dictType:null,dictLabel:null,dictValue:null,dictStatus:null,dictTag:null,dictColor:null,sorted:1,remark:null}},ge=Be({dictLabel:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典数据",trigger:"blur"}],dictStatus:[{required:!0,message:"请输入选择字典状态",trigger:"blur"}]}),y=u(!1),_e=()=>{q.value&&(y.value=!0,q.value.validate(async o=>{if(o){if(n.value.dictId!=null&&n.value.dictId!="")try{await Ee(n.value),w("修改成功🌻"),y.value=!1,k.value.koiQuickClose(),C(),c()}catch{y.value=!1,x("修改失败，请刷新重试🌻")}else try{await Re(n.value),w("添加成功🌻"),y.value=!1,k.value.koiQuickClose(),C(),c()}catch{y.value=!1,x("添加失败，请刷新重试🌻")}G()}else h("验证失败，请检查填写内容🌻"),y.value=!1}))},be=()=>{k.value.koiClose()},ye=o=>{let e=o.dictStatus==="0"?"启用":"停用";Q("确认要["+e+"]-["+o.dictLabel+"]字典吗？").then(async()=>{if(C(),!o.dictId||!o.dictStatus){j("请选择需要修改的数据🌻");return}try{await $e(o.dictId,o.dictStatus),w("修改成功🌻")}catch{T(),x("修改失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})},he=o=>{const e=o.dictId;if(e==null||e==""){j("请选中需要删除的数据🌻");return}Q("您确认需要删除字典名称["+o.dictLabel+"]么？").then(async()=>{try{await qe(e),T(),w("删除成功🌻")}catch{T(),x("删除失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})},Ve=()=>{if(N.value.length==0){Oe("请选择需要删除的数据🌻");return}Q("您确认需要进行批量删除么？").then(async()=>{try{await Fe(N.value),T(),w("批量删除成功🌻")}catch{T(),x("批量删除失败，请刷新重试🌻")}}).catch(()=>{h("已取消🌻")})};return(o,e)=>{const _=d("el-option"),z=d("el-select"),p=d("el-form-item"),L=d("el-input"),b=d("el-button"),X=d("el-form"),m=d("el-col"),we=d("KoiToolbar"),D=d("el-row"),f=d("el-table-column"),ke=d("KoiTag"),Se=d("el-switch"),Z=d("el-tooltip"),xe=d("el-table"),Te=d("el-pagination"),Ce=d("el-input-number"),Le=d("KoiDialog"),De=d("KoiCard"),Ie=M("throttle"),Ue=M("debounce"),S=M("auth"),Ke=M("loading");return s(),F("div",Qe,[t(De,null,{default:l(()=>[v(t(X,{inline:!0},{default:l(()=>[t(p,{label:"字典类型",prop:"dictType"},{default:l(()=>[t(z,{modelValue:i.value.dictType,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value.dictType=a),clearable:"",style:{width:"240px"},onKeyup:A(c,["enter","native"])},{default:l(()=>[(s(!0),F(le,null,ae(J.value,a=>(s(),g(_,{key:a.dictType,label:a.dictName,value:a.dictType},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"字典名称",prop:"dictLabel"},{default:l(()=>[t(L,{placeholder:"请输入字典名称",modelValue:i.value.dictLabel,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.dictLabel=a),clearable:"",style:{width:"240px"},onKeyup:A(c,["enter","native"])},null,8,["modelValue"])]),_:1}),t(p,{label:"字典状态",prop:"dictStatus"},{default:l(()=>[t(z,{placeholder:"请选择字典状态",modelValue:i.value.dictStatus,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.dictStatus=a),clearable:"",style:{width:"240px"},onKeyup:A(c,["enter","native"])},{default:l(()=>[t(_,{label:"启用",value:"0"}),t(_,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[v((s(),g(b,{type:"primary",icon:"search",plain:""},{default:l(()=>e[16]||(e[16]=[V("搜索")])),_:1,__:[16]})),[[Ie,ie]]),v((s(),g(b,{type:"danger",icon:"refresh",plain:""},{default:l(()=>e[17]||(e[17]=[V("重置")])),_:1,__:[17]})),[[Ue,re]])]),_:1})]),_:1},512),[[te,P.value]]),t(D,{gutter:10},{default:l(()=>[v((s(),g(m,{span:1.5},{default:l(()=>[t(b,{type:"primary",icon:"plus",plain:"",onClick:e[3]||(e[3]=a=>ve())},{default:l(()=>e[18]||(e[18]=[V("新增")])),_:1,__:[18]})]),_:1})),[[S,["system:role:add"]]]),v((s(),g(m,{span:1.5},{default:l(()=>[t(b,{type:"success",icon:"edit",plain:"",onClick:e[4]||(e[4]=a=>H()),disabled:W.value},{default:l(()=>e[19]||(e[19]=[V("修改")])),_:1,__:[19]},8,["disabled"])]),_:1})),[[S,["system:role:update"]]]),v((s(),g(m,{span:1.5},{default:l(()=>[t(b,{type:"danger",icon:"delete",plain:"",onClick:e[5]||(e[5]=a=>Ve()),disabled:Y.value},{default:l(()=>e[20]||(e[20]=[V("删除")])),_:1,__:[20]},8,["disabled"])]),_:1})),[[S,["system:role:delete"]]]),v((s(),g(m,{span:1.5},{default:l(()=>[t(b,{type:"warning",icon:"download",plain:""},{default:l(()=>e[21]||(e[21]=[V("导出")])),_:1,__:[21]})]),_:1})),[[S,["system:role:export"]]]),t(we,{showSearch:P.value,"onUpdate:showSearch":e[6]||(e[6]=a=>P.value=a),onRefreshTable:c},null,8,["showSearch"])]),_:1}),e[22]||(e[22]=ee("br",null,null,-1)),v((s(),g(xe,{border:"",data:I.value,"empty-text":"暂时没有数据哟🌻",onSelectionChange:me},{default:l(()=>[t(f,{type:"selection",width:"55",align:"center"}),t(f,{label:"序号",prop:"dictId",width:"120px",align:"center",type:"index"}),t(f,{label:"字典类型",prop:"dictType",width:"180px",align:"center"}),t(f,{label:"字典名称",prop:"dictValue",width:"120px","show-overflow-tooltip":!0,align:"center"},{default:l(a=>[t(ke,{tagOptions:R.value,value:a.row.dictValue},null,8,["tagOptions","value"])]),_:1}),t(f,{label:"字典键值",prop:"dictValue",width:"120px",align:"center"}),t(f,{label:"字典状态",prop:"dictStatus",width:"100px",align:"center"},{default:l(a=>[t(Se,{modelValue:a.row.dictStatus,"onUpdate:modelValue":B=>a.row.dictStatus=B,"active-text":"启用","inactive-text":"停用","active-value":"0","inactive-value":"1","inline-prompt":!0,onChange:B=>ye(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(f,{label:"字典排序",prop:"sorted",width:"100px",align:"center"}),t(f,{label:"字典备注",prop:"remark",width:"260px","show-overflow-tooltip":!0,align:"center"}),t(f,{label:"创建时间",prop:"createTime",width:"180px",align:"center"}),t(f,{label:"操作",align:"center",width:"120",fixed:"right"},{default:l(({row:a})=>[t(Z,{content:"修改🌻",placement:"top"},{default:l(()=>[v(t(b,{type:"primary",icon:"Edit",circle:"",plain:"",onClick:B=>H(a)},null,8,["onClick"]),[[S,["system:role:update"]]])]),_:2},1024),t(Z,{content:"删除🌻",placement:"top"},{default:l(()=>[v(t(b,{type:"danger",icon:"Delete",circle:"",plain:"",onClick:B=>he(a)},null,8,["onClick"]),[[S,["system:role:delete"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Ke,O.value]]),e[23]||(e[23]=ee("br",null,null,-1)),v(t(Te,{background:"","current-page":i.value.pageNo,"onUpdate:currentPage":e[7]||(e[7]=a=>i.value.pageNo=a),"page-size":i.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=a=>i.value.pageSize=a),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"]),[[te,U.value>0]]),t(Le,{ref_key:"koiDialogRef",ref:k,title:$.value,onKoiConfirm:_e,onKoiCancel:be,loading:y.value},{content:l(()=>[t(X,{ref_key:"formRef",ref:q,rules:ge,model:r(n),"label-width":"80px","status-icon":""},{default:l(()=>[t(D,null,{default:l(()=>[t(m,{xs:{span:24},sm:{span:12}},{default:l(()=>[t(p,{label:"字典名称",prop:"dictLabel"},{default:l(()=>[t(L,{modelValue:r(n).dictLabel,"onUpdate:modelValue":e[9]||(e[9]=a=>r(n).dictLabel=a),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:l(()=>[t(p,{label:"字典数据",prop:"dictValue"},{default:l(()=>[t(L,{modelValue:r(n).dictValue,"onUpdate:modelValue":e[10]||(e[10]=a=>r(n).dictValue=a),placeholder:"请输入字典数据",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(m,{xs:{span:24},sm:{span:12}},{default:l(()=>[t(p,{label:"标签类型",prop:"dictTag"},{default:l(()=>[t(z,{modelValue:r(n).dictTag,"onUpdate:modelValue":e[11]||(e[11]=a=>r(n).dictTag=a),placeholder:"请选择标签类型",style:{width:"240px"}},{default:l(()=>[(s(!0),F(le,null,ae(E.value,a=>(s(),g(_,{key:a.dictValue,label:a.dictLabel,value:a.dictTag,clearable:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:l(()=>[t(p,{label:"字典状态",prop:"dictStatus"},{default:l(()=>[t(z,{modelValue:r(n).dictStatus,"onUpdate:modelValue":e[12]||(e[12]=a=>r(n).dictStatus=a),placeholder:"请选择字典状态",style:{width:"260px"},clearable:""},{default:l(()=>[t(_,{label:"启用",value:"0"}),t(_,{label:"停用",value:"1"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(m,{xs:{span:24},sm:{span:12}},{default:l(()=>[t(p,{label:"标签颜色",prop:"dictColor"},{default:l(()=>[t(L,{modelValue:r(n).dictColor,"onUpdate:modelValue":e[13]||(e[13]=a=>r(n).dictColor=a),placeholder:"请输入背景颜色(16进制)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:{span:24},sm:{span:12},class:"p-l-10px"},{default:l(()=>[t(p,{label:"字典排序",prop:"sorted"},{default:l(()=>[t(Ce,{modelValue:r(n).sorted,"onUpdate:modelValue":e[14]||(e[14]=a=>r(n).sorted=a),style:{width:"260px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(m,{xs:{span:24},sm:{span:24}},{default:l(()=>[t(p,{label:"字典备注",prop:"remark"},{default:l(()=>[t(L,{modelValue:r(n).remark,"onUpdate:modelValue":e[15]||(e[15]=a=>r(n).remark=a),rows:3,type:"textarea",placeholder:"请输入字典备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),V(" "+Me(r(n)),1)]),_:1},8,["title","loading"])]),_:1,__:[22,23]})])}}});export{Ye as default};
