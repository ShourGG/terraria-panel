import{i as y}from"./index-CIGBWQpf.js";import{d as F,l as c,o as z,O as L,P as _,c as A,e as b,g as h,_ as k}from"./index-D1FNYxzU.js";const $={class:"chart-container"},B=F({__name:"KoiLeftChart",setup(M){const p=c(),o=c(null),g=c({cpu:{usage:0,cores:0,model:""},memory:{total:0,used:0,free:0,usagePercent:0},disk:{total:0,used:0,free:0,usagePercent:0}}),i=e=>{if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,l)).toFixed(2))+" "+r[l]},a=c(void 0);z(()=>{S(),v(),d(),window.addEventListener("resize",d),x()}),L(()=>{var e;(e=o.value)==null||e.dispose(),o.value=null,a.value&&(clearInterval(a.value),a.value=void 0),window.removeEventListener("resize",d)});const S=()=>{o.value=y(p.value),C(),o.value.on("mouseover",()=>{a.value&&clearInterval(a.value)}),o.value.on("mouseout",()=>{x()})},v=async()=>{try{const e=await _.get("/api/linux/system/resources");g.value=e.data,C()}catch{}},C=()=>{var w;const{cpu:e,memory:t,disk:r}=g.value,l={tooltip:{formatter:function(n){const{name:s,value:u}=n;if(s==="CPU")return`CPU使用率<br/>使用: ${u.toFixed(1)}%<br/>核心数: ${e.cores||"未知"}`;if(s==="内存"){const f=i(t.total),m=i(t.used);return`内存使用率<br/>使用: ${u.toFixed(1)}%<br/>已用: ${m}<br/>总量: ${f}`}else if(s==="磁盘"){const f=i(r.total),m=i(r.used);return`磁盘使用率<br/>使用: ${u.toFixed(1)}%<br/>已用: ${m}<br/>总量: ${f}`}return`${s}: ${u.toFixed(1)}%`}},series:[{name:"CPU使用率",type:"gauge",center:["25%","50%"],radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,progress:{show:!0},detail:{fontSize:20,offsetCenter:[0,"30%"],valueAnimation:!0,formatter:function(n){return n.toFixed(1)+"%"},color:"auto"},data:[{value:e.usage||0,name:"CPU"}],axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:"12%",width:10,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{length:3,lineStyle:{color:"auto",width:1}},splitLine:{length:5,lineStyle:{color:"auto",width:2}},axisLabel:{color:"#999",fontSize:10,distance:-20},title:{offsetCenter:[0,"-20%"],color:"#999",fontSize:14}},{name:"内存使用率",type:"gauge",center:["50%","50%"],radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,progress:{show:!0},detail:{fontSize:20,offsetCenter:[0,"30%"],valueAnimation:!0,formatter:function(n){return n.toFixed(1)+"%"},color:"auto"},data:[{value:t.usagePercent||0,name:"内存"}],axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:"12%",width:10,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{length:3,lineStyle:{color:"auto",width:1}},splitLine:{length:5,lineStyle:{color:"auto",width:2}},axisLabel:{color:"#999",fontSize:10,distance:-20},title:{offsetCenter:[0,"-20%"],color:"#999",fontSize:14}},{name:"磁盘使用率",type:"gauge",center:["75%","50%"],radius:"75%",startAngle:225,endAngle:-45,min:0,max:100,progress:{show:!0},detail:{fontSize:20,offsetCenter:[0,"30%"],valueAnimation:!0,formatter:function(n){return n.toFixed(1)+"%"},color:"auto"},data:[{value:r.usagePercent||0,name:"磁盘"}],axisLine:{lineStyle:{width:20,color:[[.3,"#67C23A"],[.7,"#409EFF"],[1,"#F56C6C"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:"12%",width:10,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{length:3,lineStyle:{color:"auto",width:1}},splitLine:{length:5,lineStyle:{color:"auto",width:2}},axisLabel:{color:"#999",fontSize:10,distance:-20},title:{offsetCenter:[0,"-20%"],color:"#999",fontSize:14}}]};(w=o.value)==null||w.setOption(l)},x=()=>{a.value=window.setInterval(()=>{v()},5e3)},d=()=>{var e;(e=o.value)==null||e.resize()};return(e,t)=>(b(),A("div",null,[t[0]||(t[0]=h("h3",{class:"mb-4"},"系统资源监控",-1)),h("div",$,[h("div",{ref_key:"refChart",ref:p,style:{height:"350px"}},null,512)])]))}}),T=k(B,[["__scopeId","data-v-80d8da39"]]);export{T as default};
